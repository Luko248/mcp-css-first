/**
 * Scroll State Container Queries
 *
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_conditional_rules/Container_scroll-state_queries
 * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/@container#scroll-state
 * Baseline: ðŸŸ£ Experimental
 * Support: Chrome 133+
 *
 * Task: Style elements based on scroll state (scrollable, stuck, snapped)
 * Why: Query whether an element is scrollable, stuck via position: sticky,
 *      or snapped via scroll-snap â€” no JavaScript scroll listeners needed
 * Last verified: 2026-02
 */


/* ==========================================================================
   1. STUCK STATE â€” detect when position: sticky is active
   Core: container-type: scroll-state on parent, @container scroll-state(stuck:)
   ========================================================================== */

.scroll-container {
  container-type: scroll-state;
}

.sticky-header {
  position: sticky;
  inset-block-start: 0;
}

/* Style header differently when stuck to top */
@container scroll-state(stuck: top) {
  .sticky-header {
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.15);
  }
}

/* Detect stuck to bottom */
@container scroll-state(stuck: bottom) {
  .sticky-footer {
    border-block-start: 1px solid currentColor;
  }
}


/* ==========================================================================
   2. SNAPPED STATE â€” detect when scroll snap is active
   Core: container-type: scroll-state on snap child, @container scroll-state(snapped:)
   ========================================================================== */

.carousel__slide {
  scroll-snap-align: center;
  container-type: scroll-state;
}

/* Only the snapped (visible) slide is fully opaque */
@container scroll-state(snapped: inline) {
  .carousel__slide > * {
    opacity: 1;
  }
}

@container not scroll-state(snapped: inline) {
  .carousel__slide > * {
    opacity: 0.3;
  }
}

/* Snapped in block direction (vertical scroll) */
@container scroll-state(snapped: block) {
  .section > * {
    translate: 0;
  }
}


/* ==========================================================================
   3. SCROLLABLE STATE â€” detect when content overflows
   Core: @container scroll-state(scrollable:)
   ========================================================================== */

.content-area {
  container-type: scroll-state;
  overflow-y: auto;
}

/* Show scroll indicator only when content is scrollable */
@container scroll-state(scrollable: top) {
  .scroll-indicator-top {
    display: block;
  }
}

@container scroll-state(scrollable: bottom) {
  .scroll-indicator-bottom {
    display: block;
  }
}

/* Show fade gradient when scrollable in inline direction */
@container scroll-state(scrollable: inline) {
  .fade-edge::after {
    content: "";
    display: block;
  }
}
